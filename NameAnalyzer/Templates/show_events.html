{% extends "layout.html" %}
{% block body %}

<canvas id="chart"></canvas>

<script>
   // bar chart data
   label_array = []
   one_month_data = []
   six_month_data = []

   {% for person in values %}
    label_array.push("{{person.displayName}}");
    one_month_data.push("{{person.oneMonthData}}")
    six_month_data.push("{{person.sixMonthData}}")

    console.log(label_array)
    console.log("testing")

    {% endfor %}
    dataset_array = [
        {
            label: "1 month average",
            backgroundColor: "blue",
            data: one_month_data
        },
        {
            label: "6 month average",
            backgroundColor: "red",
            data: six_month_data
        }
    ]

   var barData = {
     labels : label_array,
     datasets : dataset_array,
   }
 
   // get bar chart canvas
   var mychart = document.getElementById("chart").getContext("2d");
   steps = 10
   max = 10
   // draw bar chart



  var myBarChart = new Chart(mychart, {
      type: 'horizontalBar',
      data: barData,
      options: {
          legend: {
             position: "bottom"
          },

          barValueSpacing: 100,
          scales: {
            yAxes: [
              {
                ticks: {
                   min: 0,
                }
              }]
          }
        }
      });

</script>

<div class="container mt-5">



  <h2> Events </h2>
  {% for event in events %}
    <div class="card mb-3" style="width: 20rem;"> 
        <div class="card-body">
          <h3 class="card-title"> {{event.summary}} </h3>
          <p class ="card-text"> Duration: {{event.duration}} hours </p>
            {% for attendee in event.attendees %}
              <p class="card-text"> {{attendee.displayName}} </p>
            {% endfor %}
        </div>
    </div>

{% endfor %}

</div>

{% endblock %}
